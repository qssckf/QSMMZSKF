<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans default-lazy-init="true">

	<!-- 程序上下文-->
	<bean id="context" class="nc.vo.uif2.LoginContext" />
	<!--APPmodel应用程序服务总线 -->
	<bean id="manageAppModel" class="nc.ui.so.qs.sc.maschine.model.MaschineBillManageModel">
		<property name="context" ref="context" />
		<property name="businessObjectAdapterFactory" ref="boAdatorFactory" />
	</bean>  
	<!-- 数据处理模型-->
	<bean id="modelDataManager" class="nc.ui.so.qs.sc.maschine.model.MaschineModelDataManager">
		<property name="model" ref="manageAppModel" />
		<property name="service" ref="queryProxy" />
	</bean>
	<!-- 对象转换工厂 -->
	<bean id="boAdatorFactory"
		class="nc.ui.pubapp.uif2app.view.value.AggVOMetaBDObjectAdapterFactory" />
	<!-- 单据模板加载器-->
	<bean id="templateContainer" class="nc.ui.uif2.editor.TemplateContainer"
		init-method="load">
		<property name="context" ref="context" />
<!--		<property name="nodeKeies">-->
<!--			<list>-->
<!--				<value></value>-->
<!--			</list>-->
<!--		</property>-->
	</bean>
	<bean id="factoryPanel" class="nc.ui.mmbd.uif.app.bill.view.MMBillOrgPanel"
		init-method="initUI">
		<property name="model" ref="manageAppModel" />
		<property name="refPane" ref="MMOrgPanel" />
	</bean>
	<!-- 组织面板-->
	<bean id="MMOrgPanel" class="nc.ui.mmbd.pub.ref.MMFactoryRefPane" />
	<bean id="queryArea" class="nc.ui.pubapp.uif2app.tangramlayout.UEQueryAreaShell"
		init-method="initUI">
		<property name="queryAreaCreator" ref="queryAction" />
	</bean>
	<bean id="queryInfo" class="nc.ui.uif2.tangramlayout.CardLayoutToolbarPanel">
		<property name="model" ref="manageAppModel" />
	</bean>

	<bean id="cardInfoPnl" class="nc.ui.pubapp.uif2app.tangramlayout.UECardLayoutToolbarPanel">
		<property name="actions">
			<list>
				<!-- 卡片表头第一行按钮 -->
				<bean id="firstLineAction" class="nc.ui.uif2.actions.FirstLineAction">
					<property name="model" ref="manageAppModel" />
				</bean>
				<bean id="preLineAction" class="nc.ui.uif2.actions.PreLineAction">
					<property name="model" ref="manageAppModel" />
				</bean>
				<bean id="nextLineAction" class="nc.ui.uif2.actions.NextLineAction">
					<property name="model" ref="manageAppModel" />
				</bean>
				<bean id="lastLineAction" class="nc.ui.uif2.actions.LastLineAction">
					<property name="model" ref="manageAppModel" />
				</bean>
				<bean class="nc.ui.pub.beans.ActionsBar$ActionsBarSeparator" />
         		<bean id="headZoomAction" class="nc.ui.pubapp.uif2app.actions.DefaultHeadZoomAction">
           			<property name="billForm" ref="billFormEditor" />
          			<property name="model" ref="manageAppModel" />
           			<property name="pos" value="0" />
         		</bean>
			</list>
		</property>
		<property name="titleAction">
			<bean id="returnaction" class="nc.ui.pubapp.uif2app.actions.UEReturnAction">
				<property name="goComponent" ref="listView" />
				<property name="saveAction" ref="saveAction" />
				<property name="model" ref="manageAppModel" />
			</bean>
		</property>
	</bean>
	<!--关闭监听-->
	<bean id="ClosingListener" class="nc.ui.uif2.FunNodeClosingHandler">
		<property name="model">
			<ref bean="manageAppModel" />
		</property>
		<property name="saveaction">
			<ref bean="saveAction" />
		</property>
		<property name="cancelaction">
			<ref bean="cancelAction" />
		</property>
	</bean>
	<!-- ********************************************************************************************************************* -->
	<bean id="queryProxy" class="nc.ui.pd.pd0404.serviceproxy.PDWkQueryService" />
	<bean id="deleteProxy" class="nc.ui.pd.pd0404.serviceproxy.PDWkDeleteService" />
	<bean id="maintainProxy" class="nc.ui.pd.pd0404.serviceproxy.PDWkMaintainService" />
	<!-- 列表展示 -->
	<bean id="listView" class="nc.ui.so.qs.sc.maschine.view.MaschineBillListView"
		init-method="initUI">
		<property name="multiSelectionEnable" value="true" />
		<property name="userdefitemListPreparator">
			<bean class="nc.ui.pubapp.uif2app.view.CompositeBillListDataPrepare">
				<property name="billListDataPrepares">
					<list>
						<ref bean="userdefitemlistPreparator" />
						<ref bean="marAsstPreparator" />
						<ref bean="preMarAsstPreparator" />
						<ref bean="afterMarAsstPreparator" />
					</list>
				</property>
			</bean>
		</property>
			<property name="MaschineScaleUtil" ref="maschineScaleUtil" />
		<property name="MaschineBodyScaleUtil" ref="maschineBodyScaleUtil" />
		<property name="model" ref="manageAppModel" />
		<property name="templateContainer" ref="templateContainer" />
		<property name="nodekey" value="" />
<!--		<property name="bodyLineActions">-->
<!--			<list>-->
<!--				<bean class="nc.ui.mmf.framework.action.ListBodyMaxAction" />-->
<!--			</list>-->
<!--		</property>-->
	</bean>
	<!--卡片展示-->
	<bean id="billFormEditor" class="nc.ui.so.qs.sc.maschine.view.MaschineBillForm"
		init-method="initUI">
		<property name="model" ref="manageAppModel" />
		<property name="requestFocus" value="false" />
		<property name="templateContainer" ref="templateContainer" />
<!--		<property name="nodekey" value="" />-->
<!--		<property name="billOrgPanel" ref="factoryPanel" />-->
		<property name="templateNotNullValidate" value="true" />
		<property name="autoAddLine" value="true" />
		<property name="blankChildrenFilter" ref="blankChildrenFilter" />
		<property name="bodyLineActions">
			<list>
				<!-- 表体右侧按钮-->
				<bean class="nc.ui.pubapp.uif2app.actions.BodyAddLineAction" />
				<bean class="nc.ui.pubapp.uif2app.actions.BodyInsertLineAction" />
				<bean class="nc.ui.pubapp.uif2app.actions.BodyDelLineAction" />
				<bean class="nc.ui.pubapp.uif2app.actions.BodyCopyLineAction" />
				<bean class="nc.ui.pubapp.uif2app.actions.BodyPasteLineAction">
					<property name="clearItems">
						<list>
							<value>wip_items:cwk_wipid</value>
							<value>subst_items:cwk_substid</value>
							<value>prodinv_items:cwk_prodinvid</value>
							<value>replace_items:cwk_replaceid</value>
						</list>
					</property>
				</bean>
				<ref bean="bodyPasteToTailAction" />
         		<bean class="nc.ui.pub.beans.ActionsBar$ActionsBarSeparator" />
<!--         		<ref bean="rearrangeRowNoBodyLineAction" />-->
         		<ref bean="bodyLineEditAction" />
        		<bean class="nc.ui.pub.beans.ActionsBar$ActionsBarSeparator" />
         		<bean class="nc.ui.pubapp.uif2app.actions.DefaultBodyZoomAction">
            		<property name="pos" value="1"/>
         		</bean>  
			</list>
		</property>
		<property name="userdefitemPreparator">
			<bean class="nc.ui.pubapp.uif2app.view.CompositeBillDataPrepare">
				<property name="billDataPrepares">
					<list>
						<ref bean="userdefitemPreparator" />
						<ref bean="marAsstPreparator" />
						<ref bean="preMarAsstPreparator" />
						<ref bean="afterMarAsstPreparator" />
					</list>
				</property>
			</bean>
		</property>
	</bean>
<!--	<bean id="rearrangeRowNoBodyLineAction" class="nc.ui.pubapp.uif2app.actions.RearrangeRowNoBodyLineAction" />-->
	<bean id="bodyLineEditAction" class="nc.ui.pubapp.uif2app.actions.BodyLineEditAction" />
	<bean id="bodyPasteToTailAction" class="nc.ui.pubapp.uif2app.actions.BodyPasteToTailAction">
       <property name="clearItems">
           <list>
				<value>wip_items:cwk_wipid</value>
				<value>subst_items:cwk_substid</value>
				<value>prodinv_items:cwk_prodinvid</value>
				<value>replace_items:cwk_replaceid</value>
		  </list>
       </property>
    </bean>

	
	<bean id="handleMediator" class="nc.ui.pubapp.uif2app.model.AppEventHandlerMediator">
		<property name="model" ref="manageAppModel" />
		<property name="handlerGroup">
			<list>
				<!-- 表头编辑后事件group-->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardHeadTailAfterEditEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineCardHeadTailAfterEditHandler"
							init-method="initMap" />
					</property>
				</bean>
<!--					表头编辑前事件group-->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardHeadTailBeforeEditEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineCardHeadTailBeforeEditHandler"
							init-method="initMap" >
							<property name="billForm" ref="billFormEditor"/>
							</bean>
					</property>
				</bean>
				<!-- 添加事件-->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event" value="nc.ui.pubapp.uif2app.event.billform.AddEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineAddEventHandler">
							<property name="model" ref="manageAppModel"/>
							<property name="billform" ref="billFormEditor" />
						</bean>
					</property>
				</bean>
				<!-- 表体编辑后事件group-->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardBodyAfterEditEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineCardBodyAfterEditHandler"
							init-method="initMap" >
							<property name="editor" ref="billFormEditor" />
						</bean>
					</property>
				</bean>
<!--				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">-->
<!--					<property name="event"-->
<!--						value="nc.ui.pubapp.uif2app.event.card.CardBodyAfterEditEvent" />-->
<!--					<property name="handler">-->
<!--						<ref bean="measureBodyChangeHandler" />-->
<!--					</property>-->
<!--				</bean>-->
				<!-- 表体编辑前事件group-->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardBodyBeforeEditEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineCardBodyBeforeEditHandler"
							init-method="initMap">
							<property name="editor" ref="billFormEditor" />
						</bean>
					</property>
					<property name="picky">
						<bean class="nc.ui.pubapp.uif2app.event.ChildrenPicky">
							<property name="billform" ref="billFormEditor" />
							<property name="bodyVoClasses">
								<list>
									<value>nc.vo.pd.pd0404.entity.WkWipVO</value>
									<value>nc.vo.pd.pd0404.entity.WkProdinvVO</value>
									<value>nc.vo.pd.pd0404.entity.WkRepltimeVO</value>
								</list>
							</property>
						</bean>
					</property>
				</bean>
<!--				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">-->
<!--					<property name="event"-->
<!--						value="nc.ui.pubapp.uif2app.event.card.CardBodyBeforeEditEvent" />-->
<!--					<property name="handler">-->
<!--						<ref bean="measureBodyChangeHandler" />-->
<!--					</property>-->
<!--				</bean>-->
				<!-- 表体行编辑前事件group -->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardBodyRowEditEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineCardBodyBeforRowEditHandler" />
					</property>
				</bean>
				<!-- 表体行编辑后事件group -->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardBodyAfterRowEditEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineCardBodyAfterRowEditHandler"  init-method="initMap"/>
					</property>
				</bean>
				<!-- 表体编辑前改变事件group-->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardBodyBeforeTabChangeEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineCardBodyBeforeTabChangeHandler"
							init-method="initMap">
							<property name="model" ref="manageAppModel" />
							<property name="saveAction" ref="saveAction" />
							<property name="cancelAction" ref="cancelAction" />
							<property name="editAction" ref="editAction" />
						</bean>
					</property>
				</bean>
				<!-- 表体编辑后改变事件group-->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.card.CardBodyTabChangedEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineCardBodyTabChangedHandler"
							init-method="initMap" />
					</property>
				</bean>
				<!-- 表体的行改变事件group-->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.list.ListHeadRowChangedEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineRowChangeHandler">
							<property name="listView" ref="listView" />
							<property name="MaschineScaleUtil" ref="maschineScaleUtil" />
							<property name="MaschineBodyScaleUtil" ref="maschineBodyScaleUtil" />
						</bean>
					</property>
				</bean>
				<!-- 组织改变事件group-->
				<bean class="nc.ui.pubapp.uif2app.event.EventHandlerGroup">
					<property name="event"
						value="nc.ui.pubapp.uif2app.event.OrgChangedEvent" />
					<property name="handler">
						<bean class="nc.ui.so.qs.sc.maschine.handler.MaschineOrgChangedMediator">
							<property name="model" ref="manageAppModel" />
							<property name="billFormEditor" ref="billFormEditor" />
							<property name="MaschineScaleUtil" ref="maschineScaleUtil" />
							<property name="MaschineBodyScaleUtil" ref="maschineBodyScaleUtil" />
						</bean>
					</property>
				</bean>
			</list>
		</property>
	</bean>

	<bean id="maschineScaleUtil" class="nc.ui.so.qs.sc.maschine.scale.MaschineScaleUtil">
		<property name="MaschineTimeScale" ref="maschineTimeScale" />
	</bean>
	<bean id="maschineBodyScaleUtil" class="nc.ui.so.qs.sc.maschine.scale.MaschineBodyScaleUtil">
		<property name="MaschineTimeScale" ref="maschineTimeScale" />
	</bean>
	<bean id="maschineTimeScale" class="nc.ui.so.qs.sc.maschine.scale.MaschineTimeScale" />
<!--	 琛屽彿鑷姩澶勭悊 -->
	<bean id="rowMediator" class="nc.ui.pubapp.uif2app.view.RowNoMediator">
		<property name="model" ref="manageAppModel" />
		<property name="editor" ref="billFormEditor" />
	</bean>

	<!-- 界面总装 -->
	<bean id="container" class="nc.ui.uif2.TangramContainer"
		init-method="initUI">
		<property name="model" ref="manageAppModel" />
		<property name="tangramLayoutRoot">
			<bean class="nc.ui.uif2.tangramlayout.node.TBNode">
				<property name="showMode" value="CardLayout" />
				<property name="tabs">
					<list>
						<bean class="nc.ui.uif2.tangramlayout.node.HSNode">
							<property name="left">
								<bean class="nc.ui.uif2.tangramlayout.node.CNode">
									<property name="component" ref="queryArea" />
								</bean>
							</property>
							<property name="right">
								<bean class="nc.ui.uif2.tangramlayout.node.VSNode">
									<property name="up">
										<bean class="nc.ui.uif2.tangramlayout.node.CNode">
											<property name="component" ref="queryInfo" />
										</bean>
									</property>
									<property name="down">
										<bean class="nc.ui.uif2.tangramlayout.node.CNode">
											<property name="name" value="列表" />
											<property name="component" ref="listView" />
										</bean>
									</property>
									<property name="dividerLocation" value="25f" />
								</bean>
							</property>
							<property name="dividerLocation" value="0.22f" />
						</bean>
						<bean class="nc.ui.uif2.tangramlayout.node.VSNode">
							<property name="up">
								<bean class="nc.ui.uif2.tangramlayout.node.CNode">
									<property name="component" ref="cardInfoPnl" />
								</bean>
							</property>
							<property name="down">
								<bean class="nc.ui.uif2.tangramlayout.node.CNode">
									<property name="name" value="卡片" />
									<property name="component" ref="billFormEditor" />
								</bean>
							</property>
							<property name="dividerLocation" value="30f" />
						</bean>
					</list>
				</property>
			</bean>
		</property>
		<!-- 姝ゅ閰嶇疆鐨凙ction娴忚鎬佸缁堝彲瑙�-->
		<property name="actions">
			<list>
			</list>
		</property>
		<!-- 姝ゅ閰嶇疆鐨凙ction缂栬緫鎬佸缁堝彲瑙�-->
		<property name="editActions">
			<list>
			</list>
		</property>
	</bean>

	<bean id="toftpanelActionContributors" class="nc.ui.uif2.actions.ActionContributors">
		<property name="contributors">
			<list>
				<ref bean="actionsOfList" />
				<ref bean="actionsOfCard" />
			</list>
		</property>
	</bean>

	<!-- 列表按钮-->
	<bean id="actionsOfList" class="nc.ui.uif2.actions.StandAloneToftPanelActionContainer">
		<constructor-arg ref="listView" />
		<property name="actions">
			<list>
				<ref bean="addAction" />
				<ref bean="editAction" />
				<ref bean="deleteAction" />
				<ref bean="copyAction" />
				<bean class="nc.funcnode.ui.action.SeparatorAction" />
				<ref bean="queryAction" />
				<ref bean="refreshAction" />
				<bean class="nc.funcnode.ui.action.SeparatorAction" />
				<ref bean="actQueryAction" />
				<bean class="nc.funcnode.ui.action.SeparatorAction" />
				<ref bean="printMenuAction" />
			</list>
		</property>
	</bean>

	<!-- 卡片按钮 -->
	<bean id="actionsOfCard" class="nc.ui.uif2.actions.StandAloneToftPanelActionContainer">
		<constructor-arg ref="billFormEditor" />
		<property name="model" ref="manageAppModel" />
		<property name="actions">
			<list>
				<ref bean="addAction" />
				<ref bean="editAction" />
				<ref bean="deleteAction" />
				<ref bean="copyAction" />
				<bean class="nc.funcnode.ui.action.SeparatorAction" />
				<ref bean="queryAction" />
				<ref bean="refreshCardAction" />
				<bean class="nc.funcnode.ui.action.SeparatorAction" />
				<ref bean="actQueryAction" />
				<bean class="nc.funcnode.ui.action.SeparatorAction" />
				<ref bean="printMenuAction" />
			</list>
		</property>
		<property name="editActions">
			<list>
				<ref bean="saveAction" />
				<ref bean="saveAddAction" />
				<bean class="nc.funcnode.ui.action.SeparatorAction" />
				<ref bean="cancelAction" />
			</list>
		</property>
	</bean>
	<!-- 增加按钮 -->
	<bean id="addAction" class="nc.ui.pd.pd0404.actions.PDWkAddAction">
		<property name="model" ref="manageAppModel" />
		<property name="editor" ref="billFormEditor" />
		<!-- <property name="editor" ref="billFormEditor" /> -->
		<property name="interceptor">
			<bean
				class="nc.ui.pubapp.uif2app.actions.interceptor.CompositeActionInterceptor">
				<property name="interceptors">
					<list>
						<bean
							class="nc.ui.pubapp.uif2app.actions.interceptor.ShowUpComponentInterceptor">
							<property name="showUpComponent" ref="billFormEditor" />
						</bean>
					</list>
				</property>
			</bean>
		</property>
	</bean>
	<!-- 新增保存按钮 -->
	<bean id="saveAddAction" class="nc.ui.pd.pd0404.actions.PDWkSaveAddAction">
		<property name="model" ref="manageAppModel" />
		<property name="editor" ref="billFormEditor" />
		<property name="addAction" ref="addAction" />
		<property name="saveAction" ref="saveAction" />
	</bean>
	<!-- 编辑按钮 -->
	<bean id="editAction" class="nc.ui.pd.pd0404.actions.PDWkEditAction">
		<property name="model" ref="manageAppModel" />
		<property name="interceptor">
			<ref bean="ShowUpComponentInterceptorBean" />
		</property>
	</bean>
	<!-- 删除按钮-->
	<bean id="deleteAction" class="nc.ui.pubapp.uif2app.actions.DeleteAction">
		<property name="model" ref="manageAppModel" />
		<property name="singleBillService" ref="deleteProxy" />
<!--		<property name="singleBillView" ref="billFormEditor" />-->
	</bean>
	<!--保存按钮 -->
	<bean id="saveAction" class="nc.ui.pubapp.uif2app.actions.DifferentVOSaveAction">
		<property name="model" ref="manageAppModel" />
<!--		<property name="billform" ref="billFormEditor" />-->
		<property name="editor" ref="billFormEditor" />
		<property name="validationService" ref="validationService" />
		<property name="service" ref="maintainProxy" />
	</bean>
	<!-- 复制按钮 -->
	<bean id="copyAction" class="nc.ui.pubapp.uif2app.actions.CopyAction">
		<property name="model" ref="manageAppModel" />
		<property name="editor" ref="billFormEditor" />
		<property name="interceptor">
			<bean
				class="nc.ui.pubapp.uif2app.actions.interceptor.ShowUpComponentInterceptor">
				<property name="showUpComponent" ref="billFormEditor" />
			</bean>
		</property>
		<property name="copyActionProcessor">
			<bean class="nc.ui.pd.pd0404.actions.process.PDWkCopyActionProcessor">
				<property name="editor" ref="billFormEditor" />
			</bean>
		</property>
	</bean>
	<!-- 取消按钮-->
	<bean id="cancelAction" class="nc.ui.pd.pd0404.actions.PDWkCancelAction">
		<property name="model" ref="manageAppModel" />
		<property name="billForm" ref="billFormEditor" />
	</bean>
	<!--查询按钮 -->
	<bean id="queryAction" class="nc.ui.pubapp.uif2app.query2.action.DefaultQueryAction">
<!--		<property name="interceptor" ref="showListInterceptor" />-->
		<property name="qryCondDLGInitializer" ref="qryCondInitializer" />
		<property name="model" ref="manageAppModel" />
		<property name="dataManager" ref="modelDataManager" />
		<property name="templateContainer" ref="queryTemplateContainer" />
		<property name="showUpComponent" ref="listView" />
	</bean>
	<!--  显示列表的拦截器 -->
	<bean id="showListInterceptor"
		class="nc.ui.pubapp.uif2app.actions.interceptor.ShowUpComponentInterceptor">
		<property name="showUpComponent" ref="listView" />
	</bean>
	<!-- 鏌ヨ鍒濆鍖�-->
	<bean id="qryCondInitializer" class="nc.ui.pd.pd0404.query.PDWkQueryConditionInitializer" />
	<!-- 刷新按钮-->
	<bean id="refreshAction" class="nc.ui.pubapp.uif2app.query2.action.DefaultRefreshAction">
		<property name="model" ref="manageAppModel" />
		<property name="dataManager" ref="modelDataManager" />
	</bean>
	<bean id="refreshCardAction" class="nc.ui.pd.pd0404.actions.PDWkRefreshCardAction">
		<property name="model" ref="manageAppModel" />
		<property name="editor" ref="billFormEditor" />
	</bean>
	<!-- 缂栬緫鏃剁殑鍗＄墖鑷姩鍒囨崲 -->
	<bean id="ShowUpComponentInterceptorBean"
		class="nc.ui.pubapp.uif2app.actions.interceptor.ShowUpComponentInterceptor">
		<property name="showUpComponent" ref="billFormEditor" />
	</bean>
	<bean id="printMenuAction" class="nc.funcnode.ui.action.GroupAction">
		<property name="code" value="printMenuAction" />
		<property name="name">
			<bean class="nc.ui.uif2.I18nFB">
				<property name="resDir" value="common" />
				<property name="resId" value="UC001-0000007" />
				<property name="defaultValue" value="鎵撳嵃" />
			</bean>
		</property>
		<property name="actions">
			<list>
				<ref bean="printAction" />
				<ref bean="previewAction" />
				<ref bean="outputAction" />
				<bean class="nc.funcnode.ui.action.SeparatorAction" />
				<ref bean="substPrintAction" />
				<ref bean="wipPrintAction" />
				<ref bean="prodinvPrintAction" />
				<ref bean="repltimePrintAction" />
			</list>
		</property>
	</bean>
	<!-- 预览按钮 -->
	<bean id="previewAction" class="nc.ui.pubapp.uif2app.actions.MetaDataBasedPrintAction">
		<property name="preview" value="true" />
		<property name="model" ref="manageAppModel" />
		<property name="nodeKey" value="items" />
		<property name="beforePrintDataProcess" ref="beforePrintDataProcess" />
	</bean>
	<!-- 打印按钮-->
	<bean id="printAction" class="nc.ui.pubapp.uif2app.actions.MetaDataBasedPrintAction">
		<property name="preview" value="false" />
		<property name="model" ref="manageAppModel" />
		<property name="nodeKey" value="items" />
		<property name="beforePrintDataProcess" ref="beforePrintDataProcess" />
	</bean>
	<!--输出按钮 -->
	<bean id="outputAction" class="nc.ui.pubapp.uif2app.actions.OutputAction">
		<property name="model" ref="manageAppModel" />
		<property name="parent" ref="billFormEditor" />
		<property name="nodeKey" value="items" />
		<property name="beforePrintDataProcess" ref="beforePrintDataProcess" />
	</bean>
	<!-- 打印按钮 -->
	<bean id="substPrintAction" class="nc.ui.pd.pd0404.actions.PDWkSubstPrintAction">
		<property name="preview" value="false" />
		<property name="printItemKey" value="printSubst" />
		<property name="nodeKey" value="subst" />
		<property name="model" ref="manageAppModel" />
		<property name="beforePrintDataProcess" ref="beforePrintDataProcess" />
	</bean>
	<!-- 打印按钮-->
	<bean id="wipPrintAction" class="nc.ui.pd.pd0404.actions.PDWkWipPrintAction">
		<property name="preview" value="false" />
		<property name="printItemKey" value="printWip" />
		<property name="nodeKey" value="wip" />
		<property name="model" ref="manageAppModel" />
		<property name="beforePrintDataProcess" ref="beforePrintDataProcess" />
	</bean>
	<!-- 打印按钮-->
	<bean id="prodinvPrintAction" class="nc.ui.pd.pd0404.actions.PDWkProductinvPrintAction">
		<property name="preview" value="false" />
		<property name="printItemKey" value="printProdinv" />
		<property name="nodeKey" value="prodinv" />
		<property name="model" ref="manageAppModel" />
		<property name="beforePrintDataProcess" ref="beforePrintDataProcess" />
	</bean>
	<!-- 打印按钮 -->
	<bean id="repltimePrintAction" class="nc.ui.pd.pd0404.actions.PDWkRepltimePrintAction">
		<property name="preview" value="false" />
		<property name="printItemKey" value="printRepltime" />
		<property name="nodeKey" value="repltime" />
		<property name="model" ref="manageAppModel" />
		<property name="beforePrintDataProcess" ref="beforePrintDataProcess" />
	</bean>
	<bean id="beforePrintDataProcess" class="nc.ui.pd.pd0404.actions.process.BeforePrintDataProcess">
		<property name="model" ref="manageAppModel" />
	</bean>
	<!-- 查询按钮-->
	<bean id="actQueryAction" class="nc.ui.pd.pd0404.actions.PDWkActivityQueryAction">
		<property name="model" ref="manageAppModel" />
	</bean>
	<!--初始化监听（界面载入） -->
	<bean id="InitDataListener"
		class="nc.ui.pubapp.uif2app.model.DefaultFuncNodeInitDataListener">
		<property name="model" ref="manageAppModel" />
		<property name="context" ref="context" />
		<property name="voClassName" value="nc.vo.so.qs.sc.AggMaschineVO" />
		<property name="autoShowUpComponent" ref="billFormEditor" />
		<property name="queryAction" ref="queryAction" />
	</bean>
	<!-- 鍗＄墖鑷畾涔夐」閰嶇疆 -->
	<bean name="userdefitemPreparator" class="nc.ui.uif2.editor.UserdefitemContainerPreparator">
		<property name="container" ref="userdefitemContainer" />
		<property name="params">
			<list>
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="pd.pd_wk" />
					<property name="pos" value="0" />
					<property name="prefix" value="vdef" />
				</bean>
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="pd.pd_wk_wip" />
					<property name="pos" value="1" />
					<property name="prefix" value="vdef" />
					<property name="tabcode" value="wip_items" />
				</bean>
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="pd.pd_wk_prodinv" />
					<property name="pos" value="1" />
					<property name="prefix" value="vdef" />
					<property name="tabcode" value="prodinv_items" />
				</bean>
			</list>
		</property>
	</bean>
	<!-- 鍒楄〃鑷畾涔夐」澶勭悊 -->
	<bean name="userdefitemlistPreparator" class="nc.ui.uif2.editor.UserdefitemContainerListPreparator">
		<property name="container" ref="userdefitemContainer" />
		<property name="params">
			<list>
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="pd.pd_wk" />
					<property name="pos" value="0" />
					<property name="prefix" value="vdef" />
				</bean>
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="pd.pd_wk_wip" />
					<property name="pos" value="1" />
					<property name="prefix" value="vdef" />
					<property name="tabcode" value="wip_items" />
				</bean>
				<bean class="nc.ui.uif2.editor.UserdefQueryParam">
					<property name="mdfullname" value="pd.pd_wk_prodinv" />
					<property name="pos" value="1" />
					<property name="prefix" value="vdef" />
					<property name="tabcode" value="prodinv_items" />
				</bean>
			</list>
		</property>
	</bean>
	<!--鑷畾涔夐」澶勭悊 -->
	<bean id="userdefitemContainer" class="nc.ui.uif2.userdefitem.UserDefItemContainer">
		<property name="context" ref="context" />
		<property name="params">
			<list>
				<bean class="nc.ui.uif2.userdefitem.QueryParam">
					<property name="mdfullname" value="pd.pd_wk" />
				</bean>
				<bean class="nc.ui.uif2.userdefitem.QueryParam">
					<property name="mdfullname" value="pd.pd_wk_wip" />
				</bean>
				<bean class="nc.ui.uif2.userdefitem.QueryParam">
					<property name="mdfullname" value="pd.pd_wk_prodinv" />
				</bean>
				<bean class="nc.ui.uif2.userdefitem.QueryParam">
					<property name="rulecode" value="materialassistant" />
				</bean>
			</list>
		</property>
	</bean>
	<!-- 鐢熶骇绾跨墿鏂欓〉绛剧墿鏂欒緟鍔╁睘鎬х粍浠堕厤缃�-->
	<bean id="marAsstPreparator"
		class="nc.ui.pubapp.uif2app.view.material.assistant.MarAsstPreparator">
		<property name="model" ref="manageAppModel" />
		<property name="container" ref="userdefitemContainer" />
		<property name="prefix" value="vfree" />
		<property name="materialField" value="cmaterialvid" />
		<property name="projectField" value="cprojectid" />
		<property name="supplierField" value="cvendorid" />
		<property name="productorField" value="cproductorid" />
	</bean>
	<!-- 鎹骇鏃堕棿椤电鎹骇鍓嶈〃澶寸墿鏂欒緟鍔╁睘鎬х粍浠堕厤缃�-->
	<bean id="preMarAsstPreparator"
		class="nc.ui.pubapp.uif2app.view.material.assistant.MarAsstPreparator">
		<property name="model" ref="manageAppModel" />
		<property name="container" ref="userdefitemContainer" />
		<property name="prefix" value="vprefree" />
		<property name="materialField" value="cprematerialvid" />
		<property name="projectField" value="cpreprojectid" />
		<property name="supplierField" value="cprevendorid" />
		<property name="productorField" value="cpreproductorid" />
	</bean>
	<!-- 鎹骇鏃堕棿鎹骇鍚庤〃澶寸墿鏂欒緟鍔╁睘鎬х粍浠堕厤缃�-->
	<bean id="afterMarAsstPreparator"
		class="nc.ui.pubapp.uif2app.view.material.assistant.MarAsstPreparator">
		<property name="model" ref="manageAppModel" />
		<property name="container" ref="userdefitemContainer" />
		<property name="prefix" value="vafterfree" />
		<property name="materialField" value="caftermaterialvid" />
		<property name="projectField" value="cafterprojectid" />
		<property name="supplierField" value="caftervendorid" />
		<property name="productorField" value="cafterproductorid" />
	</bean>
	<!-- 绠�崟鐨勬牴鎹竴涓瓧娈垫槸鍚︿负绌虹殑绌鸿杩囨护鍣紝鍥犱负澶氭暟鎯呭喌涓嬮兘鏄垽鏂瓨璐ф槸鍚︿负绌烘潵杩囨护绌鸿 -->
	<bean id="blankChildrenFilter"
		class="nc.ui.pubapp.uif2app.view.value.MultiFieldsBlankChildrenFilter">
		<property name="nullAssertByOr" value="false" />
		<property name="filterMap">
			<map>
				<entry>
					<key>
						<value>subst_items</value>
					</key>
					<list>
						<value>csubstitutewkid</value>
					</list>
				</entry>
				<entry>
					<key>
						<value>wip_items</value>
					</key>
					<list>
						<value>cstordocid</value>
					</list>
				</entry>
				<entry>
					<key>
						<value>prodinv_items</value>
					</key>
					<list>
						<value>cmaterialclassid</value>
						<value>cmaterialvid</value>
					</list>
				</entry>
				<entry>
					<key>
						<value>replace_items</value>
					</key>
					<list>
						<value>caftermaterialvid</value>
					</list>
				</entry>
			</map>
		</property>
	</bean>
	<!-- 鏍￠獙鏈嶅姟 -->
	<bean id="validationService" class="nc.ui.pubapp.uif2app.validation.CompositeValidation">
		<property name="validators">
			<list>
				<bean class="nc.ui.pubapp.uif2app.validation.TemplateNotNullValidation">
					<property name="billForm" ref="billFormEditor" />
				</bean>
			</list>
		</property>
	</bean>
<!--	 鍩轰簬鐣岄潰UI缂撳瓨鐨勭墿鏂欎俊鎭煡璇�-->
<!--	<bean id="measureBodyChangeHandler" class="nc.ui.pd.pd0404.handler.PdwkMaterialChangeHandler">-->
<!--		<property name="cmeasureid" value="cunitid" />-->
<!--		<property name="cassmeasureid" value="castunitid" />-->
<!--		<property name="vchangerate" value="vchangerate" />-->
<!--		<property name="numberChangeHanlders">-->
<!--			<list>-->
<!--				<ref bean="numberBodyChangeHandler" />-->
<!--			</list>-->
<!--		</property>-->
<!--		<property name="bodyTableCodes">-->
<!--			<list>-->
<!--				<value>prodinv_items</value>-->
<!--			</list>-->
<!--		</property>-->
<!--	</bean>-->
<!--	<bean id="numberBodyChangeHandler" class="nc.ui.mm.pub.measure.NumberChangeHandler">-->
<!--		<property name="num" value="nnum" />-->
<!--		<property name="assnum" value="nastnum" />-->
<!--	</bean>-->
<!-- 鍙屽嚮鍒楄〃鏄剧ず鍗＄墖 -->
	<bean id="mouseClickShowPanelMediator" class="nc.ui.pubapp.uif2app.view.MouseClickShowPanelMediator">
		<property name="listView" ref="listView" />
		<property name="showUpComponent" ref="billFormEditor" />
	</bean>
	<!-- 鑷姩淇鍗＄墖鐣岄潰鐨勫垎鏁版樉绀烘帶浠�鎹㈢畻鐜� -->
	<bean id="fractionFixMediator" class="nc.ui.pubapp.uif2app.view.FractionFixMediator">
		<constructor-arg ref="billFormEditor" />
		<constructor-arg ref="listView" />
		<property name="KeyMap">
			<map>
				<entry>
					<key>
						<value>prodinv_items</value>
					</key>
					<list>
						<value>vchangerate</value>
					</list>
				</entry>

			</map>
		</property>
	</bean>
	<!--鍒楄〃鍗＄墖鐣岄潰鎺掑簭鍚屾 -->
	<bean id="bodySortMediator" class="nc.ui.pubapp.uif2app.model.BillBodySortMediator">
		<constructor-arg ref="manageAppModel" />
		<constructor-arg ref="billFormEditor" />
		<constructor-arg ref="listView" />
	</bean>
	<!-- 鏌ヨ妯℃澘鍔犺浇bean -->
	<bean id="queryTemplateContainer" class="nc.ui.uif2.editor.QueryTemplateContainer">
		<property name="context" ref="context" />
	</bean>
	<!-- 杩滅▼璋冪敤鍚堝苟 -->
	<bean id="remoteCallCombinatorCaller" class="nc.ui.uif2.editor.UIF2RemoteCallCombinatorCaller">
		<property name="remoteCallers">
			<list>
				<ref bean="queryTemplateContainer" />
				<ref bean="templateContainer" />
				<ref bean="userdefitemContainer" />
			</list>
		</property>
	</bean>
	<!-- 鎳掑姞杞�-->
	<bean id="billLazilyLoader" class="nc.ui.pubapp.uif2app.lazilyload.DefaultBillLazilyLoader" />
	<bean id="cardLazySupport" class="nc.ui.pubapp.uif2app.lazilyload.CardPanelLazilyLoad">
		<property name="billform" ref="billFormEditor" />
	</bean>
	<bean id="listLazySupport" class="nc.ui.pubapp.uif2app.lazilyload.ListPanelLazilyLoad">
		<property name="listView" ref="listView" />
	</bean>

	<bean id="LasilyLodadMediator" class="nc.ui.pubapp.uif2app.lazilyload.LazilyLoadManager">
		<property name="model" ref="manageAppModel" />
		<property name="loader" ref="billLazilyLoader" />
		<property name="lazilyLoadSupporter">
			<list>
				<ref bean="cardLazySupport" />
				<ref bean="listLazySupport" />
				<ref bean="lazyActions" />
			</list>
		</property>
	</bean>

	<bean id="lazyActions" class="nc.ui.pubapp.uif2app.lazilyload.ActionLazilyLoad">
		<property name="model" ref="manageAppModel" />
		<property name="actionList">
			<list>
				<ref bean="printAction" />
				<ref bean="previewAction" />
				<ref bean="outputAction" />
			</list>
		</property>
	</bean>

</beans>